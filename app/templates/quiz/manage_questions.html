{% extends "base.html" %}
{% block title %}Câu hỏi - {{ quiz.title }}{% endblock %}

{% block content %}
<h3>Quiz: {{ quiz.title }} - Câu hỏi</h3>

<h5 class="mt-3">Thêm câu hỏi mới</h5>
<form method="post" class="mb-4">
  <div class="mb-3">
    <label class="form-label">Nội dung câu hỏi</label>
    <textarea name="content" class="form-control" rows="3" required></textarea>
  </div>

  <div class="mb-3">
    <label class="form-label">Loại câu hỏi</label>
    <select name="type" class="form-select">
      <option value="mcq">Trắc nghiệm</option>
      <option value="true_false">Đúng / Sai</option>
      <option value="essay">Tự luận</option>
    </select>
  </div>

  <div class="mb-3">
    <label class="form-label">Giải thích (tùy chọn)</label>
    <textarea name="explanation" class="form-control" rows="2"></textarea>
  </div>

  <h6>Đáp án (dùng cho MCQ / True/False)</h6>
  {% for i in range(1,5) %}
    <div class="mb-2">
      <label class="form-label">Lựa chọn {{ i }}</label>
      <input type="text" class="form-control" name="choice_{{ i }}">
    </div>
  {% endfor %}

  <div class="mb-3">
    <label class="form-label">Đáp án đúng</label>
    <select name="correct_choice" class="form-select">
      <option value="1">Lựa chọn 1</option>
      <option value="2">Lựa chọn 2</option>
      <option value="3">Lựa chọn 3</option>
      <option value="4">Lựa chọn 4</option>
    </select>
  </div>

  <button class="btn btn-success" type="submit">Thêm câu hỏi</button>
  <a href="{{ url_for('quiz.manage_quizzes') }}" class="btn btn-secondary">Quay lại</a>
</form>

<h5>Danh sách câu hỏi hiện có</h5>
{% if questions %}
  <ol>
    {% for q in questions %}
      <li>
        {{ q.content }} ({{ q.type }})
        {% if q.choices %}
          <ul>
            {% for c in q.choices %}
              <li>
                {% if c.is_correct %}<strong>[Đúng]</strong>{% endif %}
                {{ c.content }}
              </li>
            {% endfor %}
          </ul>
        {% endif %}
      </li>
    {% endfor %}
  </ol>
{% else %}
  <p>Chưa có câu hỏi.</p>
{% endif %}
{% endblock %}
